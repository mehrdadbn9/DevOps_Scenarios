Vagrant.configure("2") do |config|
  config.vm.box = "hashicorp/bionic64"
  
  config.vm.network "private_network", ip: "192.168.33.10"

  config.vm.provider "virtualbox" do |vb|
    vb.memory = "1024"
    vb.cpus = 2
  end
  
  config.vm.provision "shell", inline: <<-SHELL
    apt-get update
    apt-get install -y docker.io docker-compose
    usermod -aG docker vagrant

    mkdir -p /vagrant/app
    cd /vagrant/app

    # Copy your Flask app files to the VM
    cp -r /path/to/your/flask/app/* .

    # Create a Docker image for your app
    docker build -t <your-dockerhub-username>/<image-name>:<tag> .

    # Start the app and monitoring stack using Docker Compose
    docker-compose up -d
  SHELL
end
